# administration_responses_article
Код и материалы для статьи по ответам администрации в ВК.

## parser.js
Код пользовательского скрипта для исполнения в Tampermonkey. По ссылке на пост вытягивает для этого поста ветки диалога, в которых человеку отвечала администрация сообщества.

### Использование
0. Зайти в свой аккаунт в ВК.
1. Открыть скрипт парсера, в самом низу в функции parser_main найти массив urls. Вставить туда ссылки на посты, из которых нужно вытащить ветки с ответами администрации сообщества.
2. Открыть первую (или любую другую) ссылку из массива
3. Позволить скрипту пройтись по всем ссылкам.
4. В самом конце, когда скрипт перестанет идти по каким-либо ссылкам, в консоли разработчика увидеть вывод в формате JSON.
5. Сохранить этот текст в файл raw_output.json

#### Справка о формате
Выход парсера - JSON-словарь, ключи - запрошенные ссылки, значения - список словарей с ключами
- author_name - имя автора
- dialogue_index - индекс сообщения в диалоге. 0 = стартовый комментарий, 1 и больше - ответ на изначальный комментарий.
- page_url - ссылка на пост, откуда взят комментарий. Для использования в groupby, например.
- is_page_admin - является ли автор комментария администратором сообщества

## raw_to_csv.py
Превратить сырой выход в .csv файл, удобный для чтения и дальнейшей работы.
Требует python, json и pandas

## url
В этой папке лежат ссылки, папка просто для справки.
